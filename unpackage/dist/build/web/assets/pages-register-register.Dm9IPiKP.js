import{r as e,p as l,a,c as t,w as s,i as u,b as r,d as n,e as o,n as d,t as c,s as i,h as v,k as p,I as f,l as _}from"./index-DwnOT4K7.js";import{r as h,_ as g}from"./uni-app.es.BBfL1HZQ.js";import{u as m}from"./userApi.CtVFmYfA.js";import{_ as x}from"./_plugin-vue_export-helper.BCo6x5W8.js";import"./request.DtiC9qg0.js";const y=x({__name:"register",setup(x){const y=e(""),b=e(""),w=e(""),k=e(""),z=e(!1),V=e(!1),A=e(""),Z=e(""),$=e(""),j=e(""),I=()=>{z.value=!z.value},B=()=>{V.value=!V.value},C=e=>{w.value=e.detail.value,$.value&&($.value="")},U=e=>{let l=e.detail.value;l=l.replace(/\D/g,""),l.length>11&&(l=l.slice(0,11)),y.value=l,A.value&&(A.value="")},D=e=>{let l=e.detail.value;l=l.replace(/[^a-zA-Z0-9_]/g,""),b.value=l,Z.value&&(Z.value=""),k.value&&j.value&&F()},O=e=>{let l=e.detail.value;l=l.replace(/[^a-zA-Z0-9_]/g,""),k.value=l,j.value&&(j.value="")},q=()=>{w.value&&w.value.trim().length<2?$.value="昵称格式为至少2个字符":$.value=""},T=()=>{y.value?/^1[3-9]\d{9}$/.test(y.value)?A.value="":A.value="手机号格式为1开头的11位数字":A.value=""},E=()=>{b.value?b.value.length<8?Z.value="密码格式为至少8位字符":/^[a-zA-Z0-9_]+$/.test(b.value)?Z.value="":Z.value="密码格式只能包含字母数字和下划线":Z.value=""},F=()=>{k.value&&k.value!==b.value?j.value="确认密码格式需与密码一致":j.value=""},G=l((()=>/^1[3-9]\d{9}$/.test(y.value)&&b.value.length>=8&&/^[a-zA-Z0-9_]+$/.test(b.value)&&w.value.trim().length>=2&&k.value===b.value)),H=()=>{const e=b.value;return/^[a-zA-Z0-9_]*$/.test(e)?e.length<8?0:e.length<=10&&(/^[a-zA-Z]+$/.test(e)||/^\d+$/.test(e))?1:/[a-zA-Z]/.test(e)&&/\d/.test(e)&&/_/.test(e)?3:/[a-zA-Z]/.test(e)&&/\d/.test(e)?2:1:0},J=()=>{const e=H(),l=b.value;if(!/^[a-zA-Z0-9_]*$/.test(l))return"密码只能包含字母数字和下划线";if(l.length<8)return"密码至少8位";return["密码格式错误","密码强度：弱","密码强度：中","密码强度：强"][e]},K=async()=>{if(!G.value)return;if(w.value.trim().length<2)return void i({title:"昵称至少需要2个字符",icon:"none"});if(!/^1[3-9]\d{9}$/.test(y.value))return void i({title:"请输入正确的手机号格式",icon:"none"});if(b.value.length<8)return void i({title:"密码至少需要8位",icon:"none"});if(!/^[a-zA-Z0-9_]+$/.test(b.value))return void i({title:"密码只能包含字母数字和下划线",icon:"none"});if(b.value!==k.value)return void i({title:"两次密码输入不一致",icon:"none"});const e=await m.register({phone:y.value,password:b.value,nickname:w.value});console.log("注册结果:",e),200===e.code||"200"===e.code?(i({title:"注册成功",icon:"success"}),v({url:"/pages/index/index"})):i({title:e.msg,icon:"none"})},L=()=>{v({url:"/pages/index/index"})};return(e,l)=>{const i=p,v=u,m=f,x=h(a("uni-icons"),g),M=_;return r(),t(v,{class:"register-container"},{default:s((()=>[n(v,{class:"register-card"},{default:s((()=>[n(v,{class:"header"},{default:s((()=>[n(v,{class:"logo"},{default:s((()=>[n(i,{class:"logo-text"},{default:s((()=>[o("TODO+")])),_:1})])),_:1}),n(i,{class:"subtitle"},{default:s((()=>[o("创建您的账户")])),_:1})])),_:1}),n(v,{class:"form-container"},{default:s((()=>[n(v,{class:"input-group"},{default:s((()=>[n(v,{class:"input-label"},{default:s((()=>[n(i,{class:"label-text"},{default:s((()=>[o("昵称")])),_:1})])),_:1}),n(v,{class:"input-wrapper"},{default:s((()=>[n(m,{class:"input-field",type:"text",modelValue:w.value,"onUpdate:modelValue":l[0]||(l[0]=e=>w.value=e),placeholder:"请输入您的昵称","placeholder-class":"placeholder-style",onInput:C,onBlur:q},null,8,["modelValue"])])),_:1}),n(v,{class:d(["error-tip",{show:$.value}])},{default:s((()=>[n(i,{class:"error-text"},{default:s((()=>[o(c($.value),1)])),_:1})])),_:1},8,["class"])])),_:1}),n(v,{class:"input-group"},{default:s((()=>[n(v,{class:"input-label"},{default:s((()=>[n(i,{class:"label-text"},{default:s((()=>[o("手机号")])),_:1})])),_:1}),n(v,{class:"input-wrapper"},{default:s((()=>[n(m,{class:"input-field",type:"number",modelValue:y.value,"onUpdate:modelValue":l[1]||(l[1]=e=>y.value=e),placeholder:"请输入手机号","placeholder-class":"placeholder-style",maxlength:"11",onInput:U,onBlur:T},null,8,["modelValue"])])),_:1}),n(v,{class:d(["error-tip",{show:A.value}])},{default:s((()=>[n(i,{class:"error-text"},{default:s((()=>[o(c(A.value),1)])),_:1})])),_:1},8,["class"])])),_:1}),n(v,{class:"input-group"},{default:s((()=>[n(v,{class:"input-label"},{default:s((()=>[n(i,{class:"label-text"},{default:s((()=>[o("密码")])),_:1})])),_:1}),n(v,{class:"input-wrapper"},{default:s((()=>[n(m,{class:"input-field",type:z.value?"text":"password",modelValue:b.value,"onUpdate:modelValue":l[2]||(l[2]=e=>b.value=e),placeholder:"请输入密码","placeholder-class":"placeholder-style",onInput:D,onBlur:E},null,8,["type","modelValue"]),n(v,{class:"eye-icon",onClick:I},{default:s((()=>[n(x,{type:z.value?"eye":"eye-slash",size:"20",color:"#999"},null,8,["type"])])),_:1})])),_:1}),n(v,{class:d(["error-tip",{show:Z.value}])},{default:s((()=>[n(i,{class:"error-text"},{default:s((()=>[o(c(Z.value),1)])),_:1})])),_:1},8,["class"]),n(v,{class:d(["password-strength",{show:b.value}])},{default:s((()=>[n(i,{class:d(["strength-text",["strength-weak","strength-weak","strength-medium","strength-strong"][H()]])},{default:s((()=>[o(c(J()),1)])),_:1},8,["class"])])),_:1},8,["class"])])),_:1}),n(v,{class:"input-group"},{default:s((()=>[n(v,{class:"input-label"},{default:s((()=>[n(i,{class:"label-text"},{default:s((()=>[o("确认密码")])),_:1})])),_:1}),n(v,{class:"input-wrapper"},{default:s((()=>[n(m,{class:"input-field",type:V.value?"text":"password",modelValue:k.value,"onUpdate:modelValue":l[3]||(l[3]=e=>k.value=e),placeholder:"请再次输入密码","placeholder-class":"placeholder-style",onInput:O,onBlur:F},null,8,["type","modelValue"]),n(v,{class:"eye-icon",onClick:B},{default:s((()=>[n(x,{type:V.value?"eye":"eye-slash",size:"20",color:"#999"},null,8,["type"])])),_:1})])),_:1}),n(v,{class:d(["error-tip",{show:j.value}])},{default:s((()=>[n(i,{class:"error-text"},{default:s((()=>[o(c(j.value),1)])),_:1})])),_:1},8,["class"])])),_:1}),n(v,{class:"button-group"},{default:s((()=>[n(M,{class:d(["register-btn",{"btn-disabled":!G.value}]),disabled:!G.value,onClick:K},{default:s((()=>[o(" 注册 ")])),_:1},8,["class","disabled"])])),_:1}),n(v,{class:"footer-links"},{default:s((()=>[n(i,{class:"link-text"},{default:s((()=>[o("已有账户？")])),_:1}),n(i,{class:"link-btn",onClick:L},{default:s((()=>[o("立即登录")])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})}}},[["__scopeId","data-v-4a5f2831"]]);export{y as default};
