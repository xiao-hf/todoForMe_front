import{r as e,p as a,o as l,q as t,a as s,c as o,w as c,s as u,i as n,b as i,g as r,d,e as p,t as f,u as v,v as m,F as k,n as _,x as y,f as h,h as g,y as C,z as b,A as w,B as T,C as I,D as x,j as z,k as D,S as X,I as V,l as j}from"./index-DwnOT4K7.js";import{o as S,r as U,_ as M}from"./uni-app.es.BBfL1HZQ.js";import{_ as F}from"./uni-card.BTl7MJ-D.js";import{u as $}from"./utilApi.BUPvZiR4.js";import{u as P}from"./userApi.CtVFmYfA.js";import{t as A}from"./taskApi.A__h-ifa.js";import{u as R}from"./user.H6OceLeH.js";import{_ as Y}from"./_plugin-vue_export-helper.BCo6x5W8.js";import"./request.DtiC9qg0.js";const q=Y({__name:"home",setup(Y){const q=R(),B=e([]),L=e({description:"",value:"1"}),E=e(!1),N=e(!1),O=e(!1),G=e(!1),H=e(!1),J=e(!1),K=e({id:null,description:"",value:"1"}),Q=e(!1),W=e(Date.now());let Z=null;const ee=e({}),ae=e(0),le=e(0),te=e(null),se=e(!1),oe=e(!1),ce=e(!1),ue=e(!1),ne=e(!1),ie=e(!1),re=e(!1),de=e(!1),pe=e("1"),fe=e(!1),ve=e(!1),me=e(!1),ke=e(0),_e=e(0),ye=e({translateX:0,showCost:!1}),he=e({nickname:"",backImg:null}),ge=e(""),Ce=e(!1);async function be(){const e=await P.getMoney();q.userInfo.money=e.data,q.setUserInfo(q.userInfo)}async function we(){const e=await P.getUserInfo();q.userInfo=e.data,q.setUserInfo(q.userInfo)}const Te=a((()=>q.userInfo.backgroudImg||"")),Ie=a((()=>{const e=new Date(W.value);return`${e.getMonth()+1}月${e.getDate()}日 ${["星期日","星期一","星期二","星期三","星期四","星期五","星期六"][e.getDay()]}`}));a((()=>Te.value&&!Ce.value));const xe=a((()=>(q.userInfo.money||0).toLocaleString())),ze=a((()=>B.value.filter((e=>!e.isCompleted)).sort(((e,a)=>(e.sort||0)-(a.sort||0))))),De=a((()=>B.value.filter((e=>e.isCompleted)).sort(((e,a)=>(e.sort||0)-(a.sort||0))))),Xe=()=>{he.value.nickname=q.userInfo.nickname||"",he.value.backImg=null,ge.value=q.userInfo.backgroudImg||"",ne.value=!0},Ve=()=>{se.value=!0},je=()=>{ce.value=!0},Se=()=>{ue.value=!0,setTimeout((()=>{ce.value=!1,ue.value=!1}),300)},Ue=()=>{Se(),setTimeout((()=>{g({url:"/pages/chat/chat"})}),300)},Me=()=>{Se(),setTimeout((()=>{g({url:"/pages/aiRole/aiRole"})}),300)},Fe=()=>{Se(),setTimeout((()=>{g({url:"/pages/aiSetting/aiSetting"})}),300)},$e=async e=>{try{const a=await A.complete(e);200===a.code||"200"===a.code?(await ha(),be()):u({title:a.message||"操作失败",icon:"none"})}catch(a){console.error("切换任务状态失败:",a),u({title:"操作失败",icon:"none"})}},Pe=async e=>{try{const a=await A.like(e);200===a.code||"200"===a.code?await ha():u({title:a.message||"操作失败",icon:"none"})}catch(a){console.error("切换收藏状态失败:",a),u({title:"操作失败",icon:"none"})}},Ae=()=>{Q.value=!Q.value},Re=(e,a)=>{ae.value=e.touches[0].clientX,le.value=e.touches[0].clientY,te.value=a},Ye=(e,a)=>{if(te.value!==a)return;const l=e.touches[0].clientX,t=e.touches[0].clientY,s=l-ae.value,o=t-le.value;if(!(Math.abs(o)>Math.abs(s))&&s<0){const e=Math.max(.5*s,-120);ee.value[a]||(ee.value[a]={}),ee.value[a].translateX=e,ee.value[a].showDelete=e<-30}},qe=(e,a)=>{if(te.value!==a)return;const l=ee.value[a];l&&(l.translateX<-60?Ne(a):l.translateX<-30?(l.translateX=-120,l.showDelete=!0):Be(a),te.value=null)},Be=e=>{ee.value[e]&&(ee.value[e].translateX=0,ee.value[e].showDelete=!1)},Le=()=>{Object.keys(ee.value).forEach((e=>{Be(e)}))},Ee=()=>{Le(),ua()},Ne=e=>{Le();const a=Ge(e);a?I({title:"删除确认",content:`确定要删除"${a.taskDescription}"任务吗？`,confirmColor:"#f56c6c",success:async a=>{a.confirm&&await Oe(e)}}):console.error("未找到要删除的任务:",e)},Oe=async e=>{if(e){C({title:"删除中..."});try{const a=await A.deleteTask(e);b(),200===a.code||"200"===a.code?(u({title:"任务已删除",icon:"success"}),await ha()):u({title:a.message||"删除失败",icon:"none"})}catch(a){b(),u({title:"删除失败",icon:"none"}),console.error("删除任务失败:",a)}}},Ge=e=>B.value.find((a=>a.id===e)),He=()=>{oe.value=!0,setTimeout((()=>{se.value=!1,oe.value=!1}),300)},Je=()=>{He(),setTimeout((()=>{g({url:"/pages/like/like"})}),300)},Ke=()=>{He(),setTimeout((()=>{g({url:"/pages/statistics/statistics"})}),300)},Qe=()=>{He(),setTimeout((()=>{g({url:"/pages/charts/charts"})}),300)},We=()=>{He(),setTimeout((()=>{g({url:"/pages/milestore/milestore"})}),300)},Ze=()=>{He(),setTimeout((()=>{g({url:"/pages/template/template"})}),300)},ea=()=>{He(),setTimeout((()=>{g({url:"/pages/trade/trade"})}),300)},aa=()=>{E.value=!0,setTimeout((()=>{O.value=!0}),300)},la=(e,a)=>{a&&a.stopPropagation(),e.isCompleted||(K.value={id:e.id,description:e.taskDescription,value:e.value?e.value.toString():"1"},G.value=!0,setTimeout((()=>{J.value=!0}),300))},ta=()=>{H.value=!0,J.value=!1,setTimeout((()=>{G.value=!1,H.value=!1,K.value={id:null,description:"",value:"1"}}),300)},sa=e=>{ke.value=e.touches[0].clientX,_e.value=e.touches[0].clientY},oa=e=>{const a=e.touches[0].clientX,l=e.touches[0].clientY,t=a-ke.value,s=l-_e.value;if(!(Math.abs(s)>Math.abs(t))&&t<0){const e=Math.max(.5*t,-120);ye.value.translateX=e,ye.value.showCost=e<-30}},ca=e=>{e.changedTouches[0].clientX;ke.value,ye.value.translateX<-30?(re.value=!0,setTimeout((()=>{fe.value=!0}),300),setTimeout((()=>{ua()}),100),e.preventDefault(),e.stopPropagation()):ua()},ua=()=>{ye.value.translateX=0,ye.value.showCost=!1},na=()=>{N.value=!0,O.value=!1,setTimeout((()=>{E.value=!1,N.value=!1,L.value={description:"",value:"1"}}),300)},ia=async()=>{if(L.value.description.trim()){C({title:"添加中..."});try{const e={desc:L.value.description.trim(),value:parseInt(L.value.value)||1},a=await A.addTask(e);b(),200===a.code||"200"===a.code?(na(),u({title:"任务添加成功",icon:"success"}),ha()):u({title:a.message||"添加失败",icon:"none"})}catch(e){b(),u({title:"添加失败",icon:"none"}),console.error("添加任务失败:",e)}}else u({title:"请输入任务描述",icon:"none"})},ra=async()=>{if(K.value.description.trim()){C({title:"修改中..."});try{const e={id:K.value.id,desc:K.value.description.trim(),value:parseInt(K.value.value)||1},a=await A.updateTask(e);b(),200===a.code||"200"===a.code?(ta(),u({title:"任务修改成功",icon:"success"}),ha()):u({title:a.message||"修改失败",icon:"none"})}catch(e){b(),u({title:"修改失败",icon:"none"}),console.error("修改任务失败:",e)}}else u({title:"请输入任务描述",icon:"none"})},da=e=>{let a=e.detail.value||e.target.value;a=a.replace(/[^\d]/g,""),a&&parseInt(a)<1&&(a="1"),a||(a="1"),L.value.value=a},pa=()=>{const e=parseInt(L.value.value)||1;L.value.value=(e+1).toString()},fa=()=>{const e=parseInt(L.value.value)||1;e>1&&(L.value.value=(e-1).toString())},va=e=>{let a=e.detail.value||e.target.value;a=a.replace(/[^\d]/g,""),a&&parseInt(a)<1&&(a="1"),a||(a="1"),K.value.value=a},ma=()=>{const e=parseInt(K.value.value)||1;K.value.value=(e+1).toString()},ka=()=>{const e=parseInt(K.value.value)||1;e>1&&(K.value.value=(e-1).toString())},_a=async()=>{try{const e=await $.now();e&&e.data&&(W.value=e.data)}catch(e){console.error("获取服务器时间失败:",e),W.value=Date.now()}},ya=()=>{Z&&clearTimeout(Z);const e=new Date(W.value),a=new Date(e.getFullYear(),e.getMonth(),e.getDate()+1,0,0,0,0).getTime()-e.getTime();Z=setTimeout((async()=>{await _a(),console.log("自动更新时间:",new Date(W.value)),ya()}),a),console.log(`设置每日更新定时器，${Math.round(a/1e3/60)} 分钟后触发`)},ha=async()=>{try{const e=await A.queryList({isToday:!0,pageNo:1,pageSize:1e4});e&&"200"===e.code&&e.data&&e.data.list&&(B.value=e.data.list)}catch(e){console.error("获取任务列表失败:",e),u({title:"获取任务列表失败",icon:"none"})}},ga=()=>{Ce.value=!0,u({title:"背景图片加载失败",icon:"none"})},Ca=()=>{Ce.value=!1},ba=()=>{w({count:1,sizeType:["compressed"],sourceType:["album","camera"],success:e=>{const a=e.tempFilePaths[0];T({filePath:a,success:e=>{he.value.backImg={path:a,size:e.size},ge.value=a}})},fail:()=>{}})},wa=()=>{he.value.backImg=null,ge.value=""},Ta=()=>{ie.value=!0,setTimeout((()=>{ne.value=!1,ie.value=!1,he.value={nickname:"",backImg:null},ge.value=""}),300)},Ia=async()=>{if(he.value.nickname.trim()){C({title:"更新中..."});try{const e=await P.upd(he.value.nickname.trim(),he.value.backImg);if(b(),200===e.code||"200"===e.code){const a={...q.userInfo,nickname:he.value.nickname.trim()};e.data&&e.data.backImg?a.backgroudImg=e.data.backImg:ge.value&&he.value.backImg&&(a.backgroudImg=ge.value),q.setUserInfo(a),u({title:"修改成功",icon:"success"}),Ta(),we()}else u({title:e.message||"修改失败",icon:"none"})}catch(e){b(),u({title:"修改失败",icon:"none"}),console.error("修改用户信息失败:",e)}}else u({title:"请输入昵称",icon:"none"})},xa=()=>{re.value=!0,setTimeout((()=>{fe.value=!0}),300)},za=()=>{de.value=!0,fe.value=!1,setTimeout((()=>{re.value=!1,de.value=!1,pe.value="1",ua()}),300)},Da=e=>{let a=e.detail.value||e.target.value;a=a.replace(/[^\d]/g,""),a&&parseInt(a)<1&&(a="1"),a||(a="1"),pe.value=a},Xa=async()=>{const e=parseInt(pe.value);if(!e||e<1)u({title:"请输入有效金额",icon:"none"});else{C({title:"消费中..."});try{const a=await P.cost(e);b(),200===a.code||"200"===a.code?(u({title:"消费成功",icon:"success"}),za(),await be()):(console.log("xxx",a),u({title:a.data.message||"消费失败",icon:"none"}))}catch(a){b(),u({title:res.data.message||"消费失败",icon:"none"}),console.error("消费失败:",a)}}},Va=e=>{},ja=async()=>{me.value=!0,ve.value=!0;try{await Promise.all([ha(),be(),we(),_a()]),u({title:"刷新成功",icon:"success",duration:1500})}catch(e){console.error("刷新失败:",e),u({title:"刷新失败，请重试",icon:"none",duration:2e3})}finally{setTimeout((()=>{me.value=!1,ve.value=!1}),800)}},Sa=()=>{me.value=!1,ve.value=!1},Ua=async()=>{I({title:"确认退出",content:"确定要退出登录吗？",success:async e=>{if(e.confirm){C({title:"退出中..."});try{await P.logout()}catch(a){console.error("调用退出登录接口失败:",a)}finally{q.logout(),b(),u({title:"已退出登录",icon:"success"}),setTimeout((()=>{x({url:"/pages/index/index"})}),1e3)}}}})};return l((async()=>{await _a(),ya(),q.initUserInfo(),ha()})),S((async()=>{try{await Promise.all([ha(),be(),we(),_a()])}catch(e){console.error("页面刷新失败:",e)}})),t((()=>{Z&&(clearTimeout(Z),Z=null)})),(e,a)=>{const l=z,t=U(s("uni-icons"),M),u=n,g=D,C=U(s("uni-card"),F),b=X,w=V,T=j;return i(),o(u,{class:"home-container"},{default:c((()=>[Te.value?(i(),o(l,{key:0,src:Te.value,class:"background-image",mode:"aspectFill",onError:ga,onLoad:Ca},null,8,["src"])):r("",!0),d(u,{class:"nav-header"},{default:c((()=>[d(u,{class:"nav-left"},{default:c((()=>[d(u,{class:"icon-wrapper"},{default:c((()=>[d(t,{type:"undo",size:"24",color:"#fff",onClick:Ua})])),_:1}),d(u,{class:"icon-wrapper"},{default:c((()=>[d(t,{type:"chatboxes",size:"24",color:"#fff",onClick:je})])),_:1})])),_:1}),d(u,{class:"nav-center"},{default:c((()=>[d(g,{class:"money-text"},{default:c((()=>[p("¥"+f(xe.value),1)])),_:1})])),_:1}),d(u,{class:"nav-right"},{default:c((()=>[d(u,{class:"icon-wrapper"},{default:c((()=>[d(t,{type:"more-filled",size:"24",color:"#fff",onClick:Ve})])),_:1}),d(u,{class:"icon-wrapper"},{default:c((()=>[d(t,{type:"gear",size:"24",color:"#fff",onClick:Xe})])),_:1})])),_:1})])),_:1}),d(u,{class:"date-header"},{default:c((()=>[d(g,{class:"date-info"},{default:c((()=>[p(f(Ie.value),1)])),_:1})])),_:1}),d(b,{class:"task-list","scroll-y":"true",onScroll:Ee,"refresher-enabled":"true","refresher-background":"transparent","refresher-triggered":me.value,onRefresherpulling:Va,onRefresherrefresh:ja,onRefresherrestore:Sa},{default:c((()=>[(i(!0),v(k,null,m(ze.value,((e,a)=>(i(),o(C,{key:e.id,"is-shadow":!1,border:!1,margin:"8rpx 20rpx",class:"task-card task-swipe-container"},{default:c((()=>[d(u,{class:"task-swipe-wrapper"},{default:c((()=>{var a,l;return[d(u,{class:"task-item",style:y({transform:`translateX(${(null==(a=ee.value[e.id])?void 0:a.translateX)||0}rpx)`}),onTouchstart:a=>Re(a,e.id),onTouchmove:a=>Ye(a,e.id),onTouchend:a=>qe(0,e.id)},{default:c((()=>[d(u,{class:"task-checkbox",onClick:a=>$e(e.id)},{default:c((()=>[d(t,{type:"checkbox",size:24,color:"#C7C7CC"})])),_:2},1032,["onClick"]),d(u,{class:"task-content",onClick:a=>la(e,a)},{default:c((()=>[d(g,{class:"task-description"},{default:c((()=>[p(f(e.taskDescription),1)])),_:2},1024),e.value&&e.value>=1?(i(),o(u,{key:0,class:"task-value"},{default:c((()=>[d(t,{type:"wallet",size:"14",color:"#666"}),d(g,{class:"value-text"},{default:c((()=>[p(f(e.value),1)])),_:2},1024)])),_:2},1024)):r("",!0)])),_:2},1032,["onClick"]),d(u,{class:"task-actions"},{default:c((()=>[d(t,{type:e.like?"star-filled":"star",size:24,color:e.like?"#FFD700":"#C7C7CC",onClick:a=>Pe(e.id)},null,8,["type","color","onClick"])])),_:2},1024)])),_:2},1032,["style","onTouchstart","onTouchmove","onTouchend"]),(null==(l=ee.value[e.id])?void 0:l.showDelete)?(i(),o(u,{key:0,class:"delete-action",onClick:a=>Ne(e.id)},{default:c((()=>[d(t,{type:"trash",size:"24",color:"#fff"})])),_:2},1032,["onClick"])):r("",!0)]})),_:2},1024)])),_:2},1024)))),128)),De.value.length>0?(i(),o(u,{key:0,class:"section-title",onClick:Ae},{default:c((()=>[d(t,{type:Q.value?"down":"right",size:"16",color:"rgba(255, 255, 255, 0.7)"},null,8,["type"]),d(g,{class:"section-text"},{default:c((()=>[p("已完成")])),_:1})])),_:1})):r("",!0),d(u,{class:_(["completed-tasks-container",{collapsed:!Q.value}])},{default:c((()=>[(i(!0),v(k,null,m(De.value,((e,a)=>(i(),o(C,{key:e.id,"is-shadow":!1,border:!1,margin:"8rpx 20rpx",class:"task-card task-swipe-container"},{default:c((()=>[d(u,{class:"task-swipe-wrapper"},{default:c((()=>{var a,l;return[d(u,{class:"task-item",style:y({transform:`translateX(${(null==(a=ee.value[e.id])?void 0:a.translateX)||0}rpx)`}),onTouchstart:a=>Re(a,e.id),onTouchmove:a=>Ye(a,e.id),onTouchend:a=>qe(0,e.id)},{default:c((()=>[d(u,{class:"task-checkbox",onClick:a=>$e(e.id)},{default:c((()=>[d(t,{type:"checkbox",size:24,color:"#4CD964"})])),_:2},1032,["onClick"]),d(u,{class:"task-content completed-task",onClick:a=>la(e,a)},{default:c((()=>[d(g,{class:"task-description completed"},{default:c((()=>[p(f(e.taskDescription),1)])),_:2},1024),e.value&&e.value>=1?(i(),o(u,{key:0,class:"task-value"},{default:c((()=>[d(t,{type:"wallet",size:"14",color:"#666"}),d(g,{class:"value-text"},{default:c((()=>[p(f(e.value),1)])),_:2},1024)])),_:2},1024)):r("",!0)])),_:2},1032,["onClick"]),d(u,{class:"task-actions"},{default:c((()=>[d(t,{type:e.like?"star-filled":"star",size:24,color:e.like?"#FFD700":"#C7C7CC",onClick:a=>Pe(e.id)},null,8,["type","color","onClick"])])),_:2},1024)])),_:2},1032,["style","onTouchstart","onTouchmove","onTouchend"]),(null==(l=ee.value[e.id])?void 0:l.showDelete)?(i(),o(u,{key:0,class:"delete-action",onClick:a=>Ne(e.id)},{default:c((()=>[d(t,{type:"trash",size:"24",color:"#fff"})])),_:2},1032,["onClick"])):r("",!0)]})),_:2},1024)])),_:2},1024)))),128))])),_:1},8,["class"])])),_:1},8,["refresher-triggered"]),d(u,{class:"add-task-container"},{default:c((()=>[d(u,{class:"add-task-swipe-wrapper"},{default:c((()=>[d(u,{class:"add-task-btn",style:y({transform:`translateX(${ye.value.translateX}rpx)`}),onClick:aa,onTouchstart:sa,onTouchmove:oa,onTouchend:ca},{default:c((()=>[d(t,{type:"plus",size:"20",color:"#fff"}),d(g,{class:"add-btn-text"},{default:c((()=>[p("添加任务")])),_:1})])),_:1},8,["style"]),ye.value.showCost?(i(),o(u,{key:0,class:"cost-action",onClick:xa},{default:c((()=>[d(t,{type:"wallet",size:"24",color:"#fff"})])),_:1})):r("",!0)])),_:1})])),_:1}),E.value?(i(),o(u,{key:1,class:"modal-overlay",onClick:na},{default:c((()=>[d(u,{class:_(["modal-content",{closing:N.value}]),onClick:a[3]||(a[3]=h((()=>{}),["stop"]))},{default:c((()=>[d(u,{class:"popup-header"},{default:c((()=>[d(g,{class:"popup-title"},{default:c((()=>[p("新建任务")])),_:1}),d(u,{class:"popup-close",onClick:na},{default:c((()=>[d(t,{type:"close",size:"20",color:"#666"})])),_:1})])),_:1}),d(u,{class:"input-group"},{default:c((()=>[d(u,{class:"input-label"},{default:c((()=>[p("任务描述")])),_:1}),d(w,{class:"task-input",modelValue:L.value.description,"onUpdate:modelValue":a[0]||(a[0]=e=>L.value.description=e),placeholder:"请输入任务描述...",maxlength:"100",focus:O.value,onBlur:a[1]||(a[1]=e=>O.value=!1)},null,8,["modelValue","focus"])])),_:1}),d(u,{class:"input-group"},{default:c((()=>[d(u,{class:"input-label"},{default:c((()=>[p("任务价值")])),_:1}),d(u,{class:"number-input-container"},{default:c((()=>[d(w,{class:"task-input number-input",modelValue:L.value.value,"onUpdate:modelValue":a[2]||(a[2]=e=>L.value.value=e),type:"number",placeholder:"最小值为1",onInput:da},null,8,["modelValue"]),d(u,{class:"number-controls"},{default:c((()=>[d(u,{class:"control-btn increase-btn",onClick:pa},{default:c((()=>[d(t,{type:"plus",size:"20",color:"#fff"})])),_:1}),d(u,{class:"control-btn decrease-btn",onClick:fa},{default:c((()=>[d(t,{type:"minus",size:"20",color:"#fff"})])),_:1})])),_:1})])),_:1})])),_:1}),d(u,{class:"popup-actions"},{default:c((()=>[d(T,{class:"cancel-btn",onClick:na},{default:c((()=>[p("取消")])),_:1}),d(T,{class:"confirm-btn",onClick:ia,disabled:!L.value.description.trim()},{default:c((()=>[p("确认添加")])),_:1},8,["disabled"])])),_:1})])),_:1},8,["class"])])),_:1})):r("",!0),G.value?(i(),o(u,{key:2,class:"modal-overlay",onClick:ta},{default:c((()=>[d(u,{class:_(["modal-content",{closing:H.value}]),onClick:a[7]||(a[7]=h((()=>{}),["stop"]))},{default:c((()=>[d(u,{class:"popup-header"},{default:c((()=>[d(g,{class:"popup-title"},{default:c((()=>[p("修改任务")])),_:1}),d(u,{class:"popup-close",onClick:ta},{default:c((()=>[d(t,{type:"close",size:"20",color:"#666"})])),_:1})])),_:1}),d(u,{class:"input-group"},{default:c((()=>[d(u,{class:"input-label"},{default:c((()=>[p("任务描述")])),_:1}),d(w,{class:"task-input",modelValue:K.value.description,"onUpdate:modelValue":a[4]||(a[4]=e=>K.value.description=e),placeholder:"请输入任务描述...",maxlength:"100",focus:J.value,onBlur:a[5]||(a[5]=e=>J.value=!1)},null,8,["modelValue","focus"])])),_:1}),d(u,{class:"input-group"},{default:c((()=>[d(u,{class:"input-label"},{default:c((()=>[p("任务价值")])),_:1}),d(u,{class:"number-input-container"},{default:c((()=>[d(w,{class:"task-input number-input",modelValue:K.value.value,"onUpdate:modelValue":a[6]||(a[6]=e=>K.value.value=e),type:"number",placeholder:"最小值为1",onInput:va},null,8,["modelValue"]),d(u,{class:"number-controls"},{default:c((()=>[d(u,{class:"control-btn increase-btn",onClick:ma},{default:c((()=>[d(t,{type:"plus",size:"20",color:"#fff"})])),_:1}),d(u,{class:"control-btn decrease-btn",onClick:ka},{default:c((()=>[d(t,{type:"minus",size:"20",color:"#fff"})])),_:1})])),_:1})])),_:1})])),_:1}),d(u,{class:"popup-actions"},{default:c((()=>[d(T,{class:"cancel-btn",onClick:ta},{default:c((()=>[p("取消")])),_:1}),d(T,{class:"confirm-btn",onClick:ra,disabled:!K.value.description.trim()},{default:c((()=>[p("确认修改")])),_:1},8,["disabled"])])),_:1})])),_:1},8,["class"])])),_:1})):r("",!0),ne.value?(i(),o(u,{key:3,class:"modal-overlay",onClick:Ta},{default:c((()=>[d(u,{class:_(["modal-content",{closing:ie.value}]),onClick:a[9]||(a[9]=h((()=>{}),["stop"]))},{default:c((()=>[d(u,{class:"popup-header"},{default:c((()=>[d(g,{class:"popup-title"},{default:c((()=>[p("修改用户信息")])),_:1}),d(u,{class:"popup-close",onClick:Ta},{default:c((()=>[d(t,{type:"close",size:"20",color:"#666"})])),_:1})])),_:1}),d(u,{class:"input-group"},{default:c((()=>[d(u,{class:"input-label"},{default:c((()=>[p("昵称")])),_:1}),d(w,{class:"task-input",modelValue:he.value.nickname,"onUpdate:modelValue":a[8]||(a[8]=e=>he.value.nickname=e),placeholder:"请输入昵称...",maxlength:"20"},null,8,["modelValue"])])),_:1}),d(u,{class:"input-group"},{default:c((()=>[d(u,{class:"input-label"},{default:c((()=>[p("背景图片")])),_:1}),ge.value?(i(),o(u,{key:0,class:"background-preview"},{default:c((()=>[d(l,{src:ge.value,class:"preview-image",mode:"aspectFill"},null,8,["src"]),d(u,{class:"remove-btn",onClick:wa},{default:c((()=>[d(t,{type:"close",size:"16",color:"#fff"})])),_:1})])),_:1})):r("",!0),d(u,{class:"choose-image-btn",onClick:ba},{default:c((()=>[d(t,{type:"image",size:"24",color:"#667eea"}),d(g,{class:"choose-text"},{default:c((()=>[p(f(ge.value?"重新选择":"选择背景图片"),1)])),_:1})])),_:1})])),_:1}),d(u,{class:"popup-actions"},{default:c((()=>[d(T,{class:"cancel-btn",onClick:Ta},{default:c((()=>[p("取消")])),_:1}),d(T,{class:"confirm-btn",onClick:Ia,disabled:!he.value.nickname.trim()},{default:c((()=>[p("确认修改")])),_:1},8,["disabled"])])),_:1})])),_:1},8,["class"])])),_:1})):r("",!0),se.value?(i(),o(u,{key:4,class:"modal-overlay",onClick:He},{default:c((()=>[d(u,{class:_(["modal-content more-menu",{closing:oe.value}]),onClick:a[10]||(a[10]=h((()=>{}),["stop"]))},{default:c((()=>[d(u,{class:"menu-header"},{default:c((()=>[d(u,{class:"menu-handle"}),d(g,{class:"menu-title"},{default:c((()=>[p("列表选项")])),_:1}),d(g,{class:"menu-done",onClick:He},{default:c((()=>[p("完成")])),_:1})])),_:1}),d(u,{class:"menu-items"},{default:c((()=>[d(u,{class:"menu-item",onClick:ea},{default:c((()=>[d(t,{type:"wallet",size:"20",color:"#333"}),d(g,{class:"menu-text"},{default:c((()=>[p("交易")])),_:1})])),_:1}),d(u,{class:"menu-item",onClick:Je},{default:c((()=>[d(t,{type:"star",size:"20",color:"#333"}),d(g,{class:"menu-text"},{default:c((()=>[p("收藏")])),_:1})])),_:1}),d(u,{class:"menu-item",onClick:Ke},{default:c((()=>[d(t,{type:"bars",size:"20",color:"#333"}),d(g,{class:"menu-text"},{default:c((()=>[p("统计")])),_:1})])),_:1}),d(u,{class:"menu-item",onClick:Qe},{default:c((()=>[d(t,{type:"circle",size:"20",color:"#333"}),d(g,{class:"menu-text"},{default:c((()=>[p("图表")])),_:1})])),_:1}),d(u,{class:"menu-item",onClick:We},{default:c((()=>[d(t,{type:"flag",size:"20",color:"#333"}),d(g,{class:"menu-text"},{default:c((()=>[p("里程")])),_:1})])),_:1}),d(u,{class:"menu-item",onClick:Ze},{default:c((()=>[d(t,{type:"list",size:"20",color:"#333"}),d(g,{class:"menu-text"},{default:c((()=>[p("模板")])),_:1})])),_:1})])),_:1})])),_:1},8,["class"])])),_:1})):r("",!0),ce.value?(i(),o(u,{key:5,class:"modal-overlay",onClick:Se},{default:c((()=>[d(u,{class:_(["modal-content more-menu",{closing:ue.value}]),onClick:a[11]||(a[11]=h((()=>{}),["stop"]))},{default:c((()=>[d(u,{class:"menu-header"},{default:c((()=>[d(u,{class:"menu-handle"}),d(g,{class:"menu-title"},{default:c((()=>[p("AI助手")])),_:1}),d(g,{class:"menu-done",onClick:Se},{default:c((()=>[p("完成")])),_:1})])),_:1}),d(u,{class:"menu-items"},{default:c((()=>[d(u,{class:"menu-item",onClick:Ue},{default:c((()=>[d(t,{type:"chatbubble",size:"20",color:"#333"}),d(g,{class:"menu-text"},{default:c((()=>[p("会话")])),_:1})])),_:1}),d(u,{class:"menu-item",onClick:Me},{default:c((()=>[d(t,{type:"person",size:"20",color:"#333"}),d(g,{class:"menu-text"},{default:c((()=>[p("人设")])),_:1})])),_:1}),d(u,{class:"menu-item",onClick:Fe},{default:c((()=>[d(t,{type:"settings",size:"20",color:"#333"}),d(g,{class:"menu-text"},{default:c((()=>[p("设置")])),_:1})])),_:1})])),_:1})])),_:1},8,["class"])])),_:1})):r("",!0),re.value?(i(),o(u,{key:6,class:"modal-overlay",onClick:za},{default:c((()=>[d(u,{class:_(["modal-content",{closing:de.value}]),onClick:a[14]||(a[14]=h((()=>{}),["stop"]))},{default:c((()=>[d(u,{class:"popup-header"},{default:c((()=>[d(g,{class:"popup-title"},{default:c((()=>[p("消费")])),_:1}),d(u,{class:"popup-close",onClick:za},{default:c((()=>[d(t,{type:"close",size:"20",color:"#666"})])),_:1})])),_:1}),d(u,{class:"input-group"},{default:c((()=>[d(u,{class:"input-label"},{default:c((()=>[p("消费金额")])),_:1}),d(w,{class:"task-input",modelValue:pe.value,"onUpdate:modelValue":a[12]||(a[12]=e=>pe.value=e),type:"number",placeholder:"请输入消费金额...",focus:fe.value,onBlur:a[13]||(a[13]=e=>fe.value=!1),onInput:Da},null,8,["modelValue","focus"])])),_:1}),d(u,{class:"popup-actions"},{default:c((()=>[d(T,{class:"cancel-btn",onClick:za},{default:c((()=>[p("取消")])),_:1}),d(T,{class:"confirm-btn",onClick:Xa,disabled:!pe.value||parseInt(pe.value)<1},{default:c((()=>[p("消费")])),_:1},8,["disabled"])])),_:1})])),_:1},8,["class"])])),_:1})):r("",!0)])),_:1})}}},[["__scopeId","data-v-aae69666"]]);export{q as default};
