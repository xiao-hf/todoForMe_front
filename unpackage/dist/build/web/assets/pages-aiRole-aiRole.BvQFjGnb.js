import{r as e,p as a,o as l,a as o,c as t,w as s,s as r,i as n,b as c,g as u,d as i,e as d,u as m,v,F as p,n as f,t as g,f as h,A as _,y,z as F,J as k,j as w,k as b,S as C,I as $,M as P,l as x,x as z,C as T}from"./index-DwnOT4K7.js";import{r as I,_ as R}from"./uni-app.es.BBfL1HZQ.js";import{_ as j}from"./uni-card.BTl7MJ-D.js";import{c as L}from"./chatApi.yh2spHK3.js";import{u as U}from"./user.H6OceLeH.js";import{b as E}from"./request.DtiC9qg0.js";import{_ as D}from"./_plugin-vue_export-helper.BCo6x5W8.js";const V=D({__name:"aiRole",setup(D){const V=U(),A=e([]),X=e(!1),B=e(!1),H=e(!1),S=e({}),M=e(!1),O=e(!1),Y=e(!1),q=e({name:"",avatar:"",avatarFile:null,tempFilePath:"",prompt:""}),J=e(!1),G=e(!1),K=e(!1),N=e({id:"",name:"",avatar:"",avatarFile:null,tempFilePath:"",prompt:""}),Q=a((()=>q.value.name.trim().length>0)),W=a((()=>N.value.name.trim().length>0)),Z=e({}),ee=e(0),ae=e(0),le=e(null),oe=e(!1),te=a((()=>V.userInfo.backgroudImg||"")),se=async()=>{try{const e=await L.getRoles();console.log("人设API返回结果:",e),e?(A.value=e,A.value.forEach(((e,a)=>{console.log(`角色[${a}] ${e.name} 头像信息:`,e.avatar||e.avatarUrl||e.avatarImage||"无头像","类型:",typeof(e.avatar||e.avatarUrl||e.avatarImage))}))):A.value=[]}catch(e){console.error("获取人设列表失败:",e),A.value=[],r({title:"获取人设列表失败",icon:"none"})}},re=e=>{q.value.name.length>10&&(q.value.name=q.value.name.substring(0,10))},ne=e=>{N.value.name.length>10&&(N.value.name=N.value.name.substring(0,10))},ce=()=>{_({count:1,sizeType:["compressed"],sourceType:["album","camera"],success:e=>{if(console.log("选择头像成功, 完整结果:",e),e.tempFilePaths&&e.tempFilePaths.length>0){const a=e.tempFilePaths[0];if(console.log("设置头像路径:",a),q.value.avatar=a,q.value.tempFilePath=a,console.log("H5环境，检查文件对象"),e.tempFiles&&e.tempFiles.length>0){const l=e.tempFiles[0];console.log("H5文件信息:",l),l.file&&(l.file instanceof File||l.file instanceof Blob)?(console.log("获取到File对象，文件大小:",l.size),q.value.avatarFile=l.file):l instanceof File||l instanceof Blob?(console.log("tempFile本身是File对象"),q.value.avatarFile=l):(console.log("尝试从路径创建File对象"),ie(a,!1))}else console.log("没有tempFiles数据，尝试从路径创建File对象"),ie(a,!1)}},fail:e=>{console.error("选择头像失败:",e)}})},ue=()=>{_({count:1,sizeType:["compressed"],sourceType:["album","camera"],success:e=>{if(console.log("选择头像成功, 完整结果:",e),e.tempFilePaths&&e.tempFilePaths.length>0){const a=e.tempFilePaths[0];if(console.log("设置头像路径:",a),N.value.avatar=a,N.value.tempFilePath=a,console.log("H5环境，检查文件对象"),e.tempFiles&&e.tempFiles.length>0){const l=e.tempFiles[0];console.log("H5文件信息:",l),l.file&&(l.file instanceof File||l.file instanceof Blob)?(console.log("获取到File对象，文件大小:",l.size),N.value.avatarFile=l.file):l instanceof File||l instanceof Blob?(console.log("tempFile本身是File对象"),N.value.avatarFile=l):(console.log("尝试从路径创建File对象"),ie(a,!0))}else console.log("没有tempFiles数据，尝试从路径创建File对象"),ie(a,!0)}},fail:e=>{console.error("选择头像失败:",e)}})},ie=async(e,a=!1)=>{try{console.log("从URL创建File对象:",e,a?"(用于编辑)":"(用于新建)");const l=await fetch(e);if(!l.ok)throw new Error(`获取文件失败: ${l.status}`);const o=await l.blob();console.log("获取到Blob:",o);const t=`avatar_${Date.now()}.${de(e)}`,s=new File([o],t,{type:o.type});console.log("创建File对象成功:",s),a?N.value.avatarFile=s:q.value.avatarFile=s}catch(l){console.error("从URL创建File对象失败:",l)}},de=e=>{const a=e.split(".").pop().toLowerCase();return["jpg","jpeg","png","gif","webp"].includes(a)?a:"jpg"},me=async()=>{if(Q.value)try{y({title:"创建中...",mask:!0}),console.log("准备创建新人设，完整数据:",q.value);const a=!!q.value.tempFilePath;console.log("是否有头像:",a);const l=q.value.name,o=q.value.prompt||"",t=q.value.tempFilePath;console.log("H5环境，使用FormData上传");const s=new FormData;if(s.append("name",l),s.append("prompt",o),a)if(q.value.avatarFile){console.log("添加头像到FormData, 文件对象:",q.value.avatarFile),s.append("avatar",q.value.avatarFile);for(let e of s.entries())console.log("FormData包含:",e[0],e[1]instanceof File?`File(${e[1].name}, ${e[1].size}字节)`:e[1]instanceof Blob?`Blob(${e[1].size}字节)`:"string"==typeof e[1]?`字符串(${e[1]})`:typeof e[1])}else{console.warn("H5环境缺少File对象，尝试直接获取文件");try{if(await ie(t,!1),!q.value.avatarFile)throw new Error("无法创建File对象");console.log("成功创建File对象，添加到FormData"),s.append("avatar",q.value.avatarFile)}catch(e){return console.error("处理头像失败:",e),r({title:"头像处理失败，请重试",icon:"none",duration:2e3}),void F()}}const n=U();console.log("发送请求到:",`${E}/ai/addRole`);const c=await fetch(`${E}/ai/addRole`,{method:"POST",headers:{Authorization:n.userInfo.authorization?`Bearer ${n.userInfo.authorization}`:""},body:s});if(console.log("服务器响应状态:",c.status),!c.ok){const e=await c.text();throw console.error("响应错误:",e),new Error(`请求失败: ${c.status}`)}const u=await c.json();if(console.log("API返回结果:",u),200!=u.code&&"200"!=u.code)throw new Error(u.msg||u.message||"创建失败");ve()}catch(a){F(),console.error("创建人设失败:",a),r({title:"创建失败: "+(a.message||"请重试"),icon:"none",duration:3e3})}else r({title:"请填写人设名称",icon:"none"})},ve=()=>{F(),r({title:"创建成功",icon:"success"}),pe(),ge(),se()},pe=()=>{q.value={name:"",avatar:"",avatarFile:null,tempFilePath:"",prompt:""},console.log("表单已重置",q.value)},fe=()=>{pe(),M.value=!0,setTimeout((()=>{O.value=!0}),50)},ge=()=>{Y.value=!0,O.value=!1,setTimeout((()=>{M.value=!1,Y.value=!1}),300)},he=()=>{K.value=!0,G.value=!1,setTimeout((()=>{J.value=!1,K.value=!1}),300)},_e=async()=>{if(W.value)try{y({title:"更新中...",mask:!0}),console.log("准备更新人设，完整数据:",N.value);try{const a=new FormData;if(a.append("id",N.value.id),a.append("name",N.value.name),a.append("prompt",N.value.prompt||""),N.value.avatarFile)console.log("使用avatarFile上传头像"),a.append("avatar",N.value.avatarFile);else if(N.value.tempFilePath){console.log("从tempFilePath创建文件对象:",N.value.tempFilePath);try{await ie(N.value.tempFilePath,!0),N.value.avatarFile&&(console.log("成功创建File对象，添加到表单"),a.append("avatar",N.value.avatarFile))}catch(e){return console.error("处理头像失败:",e),r({title:"头像处理失败，请重试",icon:"none",duration:2e3}),void F()}}console.log("发送更新请求，数据:",a);const l=U(),o=await fetch(`${E}/ai/updRole`,{method:"POST",headers:{Authorization:l.userInfo.authorization?`Bearer ${l.userInfo.authorization}`:""},body:a});if(!o.ok){const e=await o.text();throw console.error("API请求失败:",o.status,e),new Error(`HTTP error! status: ${o.status}`)}const t=await o.json();if(console.log("API请求成功，返回结果:",t),200!=t.code&&"200"!=t.code)throw new Error(t.msg||t.message||"更新失败");ye()}catch(a){throw console.error("H5环境更新失败:",a),a}}catch(a){F(),console.error("更新人设失败:",a),r({title:"更新失败: "+(a.message||"请重试"),icon:"none",duration:3e3})}else r({title:"请填写人设名称",icon:"none"})},ye=()=>{F(),r({title:"更新成功",icon:"success"}),he(),se()},Fe=e=>{Z.value[e]&&(Z.value[e].translateX=0,Z.value[e].showDelete=!1)},ke=()=>{Object.keys(Z.value).forEach((e=>{Fe(e)}))},we=()=>{ke()},be=e=>{ke();const a=A.value.find((a=>a.id===e));a?T({title:"删除确认",content:`确定要删除"${a.name}"角色吗？`,confirmColor:"#f56c6c",success:async a=>{a.confirm&&await Ce(e)}}):console.error("未找到要删除的角色:",e)},Ce=async e=>{try{y({title:"删除中...",mask:!0});const a=await L.deleteRole(e);if(F(),!a)throw new Error((null==a?void 0:a.msg)||"删除失败");r({title:"删除成功",icon:"success",duration:2e3}),se()}catch(a){F(),console.error("删除角色失败:",a),r({title:"删除失败: "+(a.message||"请重试"),icon:"none",duration:2e3})}},$e=(e,a)=>{a&&a.stopPropagation(),S.value=e,X.value=!0,setTimeout((()=>{B.value=!0}),50)},Pe=()=>{H.value=!0,B.value=!1,setTimeout((()=>{X.value=!1,H.value=!1}),300)},xe=()=>{k()},ze=()=>{console.log("背景图片加载失败")},Te=()=>{console.log("背景图片加载成功")},Ie=e=>{console.error(`头像加载失败，角色ID: ${e.id}，角色名称: ${e.name}`),console.error(`失败的头像URL: ${e.avatar}`),Re(e.avatar)},Re=e=>{if(!e)return;console.log("尝试测试URL可访问性:",e);const a=new Image;a.onload=()=>{console.log("URL可以成功加载:",e)},a.onerror=()=>{console.error("URL无法加载:",e),console.log("可能的原因: 1.跨域限制 2.URL不存在 3.服务器未响应 4.需要认证")},a.src=e},je=e=>{console.log(`头像加载成功，角色ID: ${e.id}，头像URL: ${e.avatar}`)},Le=e=>!!e&&(e.avatar?(console.log(`角色[${e.id}] ${e.name} 有头像:`,e.avatar),!0):(console.log(`角色[${e.id}] ${e.name} 无头像`),!1)),Ue=e=>{if(!e||!e.avatar)return"";const a=e.avatar;return console.log("获取头像URL:",a),a},Ee=e=>{},De=async()=>{oe.value=!0;try{await se(),r({title:"刷新成功",icon:"success",duration:1500})}catch(e){console.error("刷新失败:",e),r({title:"刷新失败，请重试",icon:"none",duration:2e3})}finally{setTimeout((()=>{oe.value=!1}),800)}},Ve=()=>{oe.value=!1},Ae=e(!0),Xe=a((()=>A.value.filter((e=>e.isSystem)))),Be=a((()=>A.value.filter((e=>!e.isSystem)))),He=()=>{Ae.value=!Ae.value};return l((async()=>{await se(),Xe.value.length>0&&(Ae.value=!0),Be.value.length})),(e,a)=>{const l=w,r=I(o("uni-icons"),R),_=n,y=b,F=I(o("uni-card"),j),k=C,T=$,L=P,U=x;return c(),t(_,{class:"role-container"},{default:s((()=>[te.value?(c(),t(l,{key:0,src:te.value,class:"background-image",mode:"aspectFill",onError:ze,onLoad:Te},null,8,["src"])):u("",!0),i(_,{class:"nav-header"},{default:s((()=>[i(_,{class:"nav-left"},{default:s((()=>[i(_,{class:"back-button",onClick:xe},{default:s((()=>[i(r,{type:"back",size:"24",color:"#fff"})])),_:1})])),_:1}),i(_,{class:"nav-center"},{default:s((()=>[i(y,{class:"nav-title"},{default:s((()=>[d("AI人设")])),_:1})])),_:1}),i(_,{class:"nav-right"})])),_:1}),i(k,{class:"role-list","scroll-y":"true",onScroll:we,"refresher-enabled":"true","refresher-background":"transparent","refresher-triggered":oe.value,onRefresherpulling:Ee,onRefresherrefresh:De,onRefresherrestore:Ve,style:{top:"160rpx"}},{default:s((()=>[i(_,{class:"group-content"},{default:s((()=>[(c(!0),m(p,null,v(Be.value,((e,a)=>(c(),t(F,{key:e.id,"is-shadow":!1,border:!1,margin:"8rpx 20rpx",class:"role-card role-swipe-container"},{default:s((()=>[i(_,{class:"role-swipe-wrapper"},{default:s((()=>{var a,o;return[i(_,{class:"role-item",style:z({transform:`translateX(${(null==(a=Z.value[e.id])?void 0:a.translateX)||0}rpx)`}),onTouchstart:a=>{return l=a,o=e.id,ee.value=l.touches[0].clientX,ae.value=l.touches[0].clientY,void(le.value=o);var l,o},onTouchmove:a=>((e,a)=>{if(le.value!==a)return;const l=e.touches[0].clientX,o=e.touches[0].clientY,t=l-ee.value,s=o-ae.value;if(!(Math.abs(s)>Math.abs(t))&&t<0){const e=Math.max(.5*t,-120);Z.value[a]||(Z.value[a]={}),Z.value[a].translateX=e,Z.value[a].showDelete=e<-30}})(a,e.id),onTouchend:a=>((e,a)=>{if(le.value!==a)return;const l=Z.value[a];l&&(l.translateX<-60?be(a):l.translateX<-30?(l.translateX=-120,l.showDelete=!0):Fe(a),le.value=null)})(0,e.id)},{default:s((()=>[i(_,{class:f(["role-icon",{"has-avatar":Le(e)}])},{default:s((()=>[Le(e)?(c(),t(l,{key:0,src:Ue(e),mode:"aspectFill",class:"avatar-image",onError:a=>Ie(e),onLoad:a=>je(e)},null,8,["src","onError","onLoad"])):(c(),t(y,{key:1,class:"icon-text"},{default:s((()=>[d(g(e.name?e.name.substring(0,1):"A"),1)])),_:2},1024))])),_:2},1032,["class"]),i(_,{class:"role-content",onClick:a=>$e(e,a)},{default:s((()=>[i(_,{class:"role-header"},{default:s((()=>[i(y,{class:"role-name"},{default:s((()=>[d(g(e.name||"未命名角色"),1)])),_:2},1024)])),_:2},1024),i(_,{class:"role-info"},{default:s((()=>[i(y,{class:"role-desc"},{default:s((()=>[d(g(e.prompt?e.prompt.length>50?e.prompt.substring(0,50)+"...":e.prompt:"该角色暂无提示词"),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"]),i(_,{class:"role-actions"},{default:s((()=>[i(r,{type:"more-filled",size:24,color:"#C7C7CC",onClick:a=>((e,a)=>{a&&a.stopPropagation(),console.log("编辑角色:",e)})(e,a)},null,8,["onClick"])])),_:2},1024),i(_,{class:"edit-button",onClick:a=>(e=>{N.value={...e},J.value=!0,setTimeout((()=>{G.value=!0}),50)})(e)},{default:s((()=>[i(r,{type:"compose",size:"20",color:"#667eea"})])),_:2},1032,["onClick"])])),_:2},1032,["style","onTouchstart","onTouchmove","onTouchend"]),(null==(o=Z.value[e.id])?void 0:o.showDelete)?(c(),t(_,{key:0,class:"delete-action",onClick:a=>be(e.id)},{default:s((()=>[i(r,{type:"trash",size:"24",color:"#fff"})])),_:2},1032,["onClick"])):u("",!0)]})),_:2},1024)])),_:2},1024)))),128)),0===Be.value.length?(c(),t(_,{key:0,class:"empty-group-hint"},{default:s((()=>[i(y,null,{default:s((()=>[d("暂无自定义人设，点击右下角按钮创建")])),_:1})])),_:1})):u("",!0)])),_:1}),Xe.value.length>0?(c(),t(_,{key:0,class:"role-group"},{default:s((()=>[i(_,{class:"section-title",onClick:He},{default:s((()=>[i(r,{type:Ae.value?"down":"right",size:"16",color:"rgba(255, 255, 255, 0.7)"},null,8,["type"]),i(y,{class:"section-text"},{default:s((()=>[d("系统")])),_:1})])),_:1}),Ae.value?(c(),t(_,{key:0,class:"group-content"},{default:s((()=>[(c(!0),m(p,null,v(Xe.value,((e,a)=>(c(),t(F,{key:e.id,"is-shadow":!1,border:!1,margin:"8rpx 20rpx",class:"role-card role-swipe-container"},{default:s((()=>[i(_,{class:"role-swipe-wrapper"},{default:s((()=>{var a;return[i(_,{class:f(["role-item",{"system-role":e.isSystem}]),style:z({transform:`translateX(${(null==(a=Z.value[e.id])?void 0:a.translateX)||0}rpx)`})},{default:s((()=>[i(_,{class:f(["role-icon",{"has-avatar":Le(e),"system-role-icon":e.isSystem}])},{default:s((()=>[Le(e)?(c(),t(l,{key:0,src:Ue(e),mode:"aspectFill",class:"avatar-image",onError:a=>Ie(e),onLoad:a=>je(e)},null,8,["src","onError","onLoad"])):(c(),t(y,{key:1,class:"icon-text"},{default:s((()=>[d(g(e.name?e.name.substring(0,1):"A"),1)])),_:2},1024))])),_:2},1032,["class"]),i(_,{class:"role-content",onClick:a=>$e(e,a)},{default:s((()=>[i(_,{class:"role-header"},{default:s((()=>[i(y,{class:"role-name"},{default:s((()=>[d(g(e.name||"未命名角色"),1)])),_:2},1024)])),_:2},1024),i(_,{class:"role-info"},{default:s((()=>[i(y,{class:"role-desc"},{default:s((()=>[d(g(e.prompt?e.prompt.length>50?e.prompt.substring(0,50)+"...":e.prompt:"该角色暂无提示词"),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])])),_:2},1032,["style","class"])]})),_:2},1024)])),_:2},1024)))),128)),0===Xe.value.length?(c(),t(_,{key:0,class:"empty-group-hint"},{default:s((()=>[i(y,null,{default:s((()=>[d("暂无系统人设")])),_:1})])),_:1})):u("",!0)])),_:1})):u("",!0)])),_:1})):u("",!0),0===A.value.length?(c(),t(_,{key:1,class:"empty-hint"},{default:s((()=>[i(y,null,{default:s((()=>[d("暂无人设数据")])),_:1})])),_:1})):u("",!0)])),_:1},8,["refresher-triggered"]),i(_,{class:"add-button-wrapper"},{default:s((()=>[i(_,{class:"add-button",onClick:fe},{default:s((()=>[i(r,{type:"plusempty",size:"24",color:"#fff"})])),_:1})])),_:1}),X.value?(c(),t(_,{key:1,class:f(["modal-overlay",{active:B.value}]),onClick:Pe},{default:s((()=>[i(_,{class:f(["modal-content role-detail-modal",{active:B.value,closing:H.value}]),onClick:a[0]||(a[0]=h((()=>{}),["stop"]))},{default:s((()=>[i(_,{class:"popup-header"},{default:s((()=>[i(y,{class:"popup-title"},{default:s((()=>[d(g(S.value.name),1)])),_:1}),i(_,{class:"popup-close",onClick:Pe},{default:s((()=>[i(r,{type:"close",size:"20",color:"#666"})])),_:1})])),_:1}),i(k,{class:"prompt-content","scroll-y":""},{default:s((()=>[i(_,{class:"prompt-text"},{default:s((()=>[d(g(S.value.prompt||"该角色暂无提示词"),1)])),_:1})])),_:1})])),_:1},8,["class"])])),_:1},8,["class"])):u("",!0),M.value?(c(),t(_,{key:2,class:f(["modal-overlay",{active:O.value}]),onClick:ge},{default:s((()=>[i(_,{class:f(["modal-content create-modal",{active:O.value,closing:Y.value}]),onClick:a[3]||(a[3]=h((()=>{}),["stop"]))},{default:s((()=>[i(_,{class:"popup-header"},{default:s((()=>[i(y,{class:"popup-title"},{default:s((()=>[d("新建人设")])),_:1}),i(_,{class:"popup-close",onClick:ge},{default:s((()=>[i(r,{type:"close",size:"20",color:"#666"})])),_:1})])),_:1}),i(_,{class:"create-form"},{default:s((()=>[i(_,{class:"form-item"},{default:s((()=>[i(_,{class:"form-label"},{default:s((()=>[i(y,null,{default:s((()=>[d("名称")])),_:1}),i(y,{class:"char-count"},{default:s((()=>[d(g(q.value.name.length)+"/10",1)])),_:1})])),_:1}),i(T,{class:"form-input",modelValue:q.value.name,"onUpdate:modelValue":a[1]||(a[1]=e=>q.value.name=e),placeholder:"请输入人设名称(10字以内)",maxlength:"10",onInput:re},null,8,["modelValue"])])),_:1}),i(_,{class:"form-item"},{default:s((()=>[i(y,{class:"form-label"},{default:s((()=>[d("头像")])),_:1}),i(_,{class:"avatar-picker"},{default:s((()=>[i(_,{class:"selected-avatar",onClick:ce},{default:s((()=>[q.value.avatar?(c(),t(l,{key:0,src:q.value.avatar,mode:"aspectFill",class:"avatar-image"},null,8,["src"])):(c(),t(_,{key:1,class:"avatar-placeholder"},{default:s((()=>[i(r,{type:"camera",size:"24",color:"#999"})])),_:1}))])),_:1})])),_:1})])),_:1}),i(_,{class:"form-item"},{default:s((()=>[i(y,{class:"form-label"},{default:s((()=>[d("提示词")])),_:1}),i(L,{class:"form-textarea",modelValue:q.value.prompt,"onUpdate:modelValue":a[2]||(a[2]=e=>q.value.prompt=e),placeholder:"请输入人设提示词",maxlength:"5000"},null,8,["modelValue"])])),_:1}),i(_,{class:"form-actions"},{default:s((()=>[i(U,{class:"cancel-button",onClick:ge},{default:s((()=>[d("取消")])),_:1}),i(U,{class:"confirm-button",onClick:me,disabled:!Q.value},{default:s((()=>[d("确定")])),_:1},8,["disabled"])])),_:1})])),_:1})])),_:1},8,["class"])])),_:1},8,["class"])):u("",!0),J.value?(c(),t(_,{key:3,class:f(["modal-overlay",{active:G.value}]),onClick:he},{default:s((()=>[i(_,{class:f(["modal-content create-modal",{active:G.value,closing:K.value}]),onClick:a[6]||(a[6]=h((()=>{}),["stop"]))},{default:s((()=>[i(_,{class:"popup-header"},{default:s((()=>[i(y,{class:"popup-title"},{default:s((()=>[d("编辑人设")])),_:1}),i(_,{class:"popup-close",onClick:he},{default:s((()=>[i(r,{type:"close",size:"20",color:"#666"})])),_:1})])),_:1}),i(_,{class:"create-form"},{default:s((()=>[i(_,{class:"form-item"},{default:s((()=>[i(_,{class:"form-label"},{default:s((()=>[i(y,null,{default:s((()=>[d("名称")])),_:1}),i(y,{class:"char-count"},{default:s((()=>[d(g(N.value.name.length)+"/10",1)])),_:1})])),_:1}),i(T,{class:"form-input",modelValue:N.value.name,"onUpdate:modelValue":a[4]||(a[4]=e=>N.value.name=e),placeholder:"请输入人设名称(10字以内)",maxlength:"10",onInput:ne},null,8,["modelValue"])])),_:1}),i(_,{class:"form-item"},{default:s((()=>[i(y,{class:"form-label"},{default:s((()=>[d("头像")])),_:1}),i(_,{class:"avatar-picker"},{default:s((()=>[i(_,{class:"selected-avatar",onClick:ue},{default:s((()=>[N.value.avatar?(c(),t(l,{key:0,src:N.value.avatar,mode:"aspectFill",class:"avatar-image"},null,8,["src"])):(c(),t(_,{key:1,class:"avatar-placeholder"},{default:s((()=>[i(r,{type:"camera",size:"24",color:"#999"})])),_:1}))])),_:1})])),_:1})])),_:1}),i(_,{class:"form-item"},{default:s((()=>[i(y,{class:"form-label"},{default:s((()=>[d("提示词")])),_:1}),i(L,{class:"form-textarea",modelValue:N.value.prompt,"onUpdate:modelValue":a[5]||(a[5]=e=>N.value.prompt=e),placeholder:"请输入人设提示词",maxlength:"5000"},null,8,["modelValue"])])),_:1}),i(_,{class:"form-actions"},{default:s((()=>[i(U,{class:"cancel-button",onClick:he},{default:s((()=>[d("取消")])),_:1}),i(U,{class:"confirm-button",onClick:_e,disabled:!W.value},{default:s((()=>[d("确定")])),_:1},8,["disabled"])])),_:1})])),_:1})])),_:1},8,["class"])])),_:1},8,["class"])):u("",!0)])),_:1})}}},[["__scopeId","data-v-c2994827"]]);export{V as default};
