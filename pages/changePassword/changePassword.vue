<template>
    <view class="change-password-container">
        <view class="change-password-card">
            <!-- È°∂ÈÉ®LogoÂå∫Âüü -->
            <view class="header">
                <view class="logo">
                    <text class="logo-text">TODO+</text>
                </view>
                <text class="subtitle">ÈáçÁΩÆÊÇ®ÁöÑÂØÜÁ†Å</text>
            </view>

            <!-- Ë°®ÂçïÂå∫Âüü -->
            <view class="form-container">
                <!-- ÊâãÊú∫Âè∑ËæìÂÖ• -->
                <view class="input-group">
                    <view class="input-label">
                        <text class="label-text">ÊâãÊú∫Âè∑</text>
                    </view>
                    <view class="input-wrapper">
                        <input 
                            class="input-field"
                            type="number"
                            v-model="mobile"
                            placeholder="ËØ∑ËæìÂÖ•ÊâãÊú∫Âè∑"
                            placeholder-class="placeholder-style"
                            maxlength="11"
                            @input="validateMobile"
                            @blur="validateMobileBlur"
                        />
                    </view>
                    <!-- ÊâãÊú∫Âè∑ÈîôËØØÊèêÁ§∫ -->
                    <view class="error-tip" :class="{ 'show': mobileError }">
                        <text class="error-text">{{ mobileError }}</text>
                    </view>
                </view>

                <!-- È™åËØÅÁ†ÅËæìÂÖ• -->
                <view class="input-group">
                    <view class="input-label">
                        <text class="label-text">È™åËØÅÁ†Å</text>
                    </view>
                    <view class="input-wrapper verification-wrapper">
                        <input 
                            class="input-field verification-input"
                            type="number"
                            v-model="verificationCode"
                            placeholder="ËØ∑ËæìÂÖ•È™åËØÅÁ†Å"
                            placeholder-class="placeholder-style"
                            maxlength="6"
                            @input="validateVerificationCode"
                            @blur="validateVerificationCodeBlur"
                        />
                        <button
                            class="send-code-btn"
                            :class="{ 'btn-disabled': !canSendCode }"
                            :disabled="!canSendCode"
                            @tap="sendVerificationCode"
                        >
                            {{ sendCodeText }}
                        </button>
                    </view>
                    <!-- È™åËØÅÁ†ÅÈîôËØØÊèêÁ§∫ -->
                    <view class="error-tip" :class="{ 'show': verificationCodeError }">
                        <text class="error-text">{{ verificationCodeError }}</text>
                    </view>
                </view>

                <!-- Êñ∞ÂØÜÁ†ÅËæìÂÖ• -->
                <view class="input-group">
                    <view class="input-label">
                        <text class="label-text">Êñ∞ÂØÜÁ†Å</text>
                    </view>
                    <view class="input-wrapper">
                        <input 
                            class="input-field"
                            :type="showNewPassword ? 'text' : 'password'"
                            v-model="newPassword"
                            placeholder="ËØ∑ËæìÂÖ•Êñ∞ÂØÜÁ†Å"
                            placeholder-class="placeholder-style"
                            @input="validateNewPassword"
                            @blur="validateNewPasswordBlur"
                        />
                        <view class="eye-icon" @tap="toggleNewPassword">
                            <text class="iconfont">{{ showNewPassword ? 'üëÅÔ∏è' : 'üëÅÔ∏è‚Äçüó®Ô∏è' }}</text>
                        </view>
                    </view>
                    <!-- Êñ∞ÂØÜÁ†ÅÈîôËØØÊèêÁ§∫ -->
                    <view class="error-tip" :class="{ 'show': newPasswordError }">
                        <text class="error-text">{{ newPasswordError }}</text>
                    </view>
                    <!-- ÂØÜÁ†ÅÂº∫Â∫¶ÊèêÁ§∫ -->
                    <view class="password-strength" :class="{ 'show': newPassword }">
                        <text class="strength-text" :class="getPasswordStrengthClass()">
                            {{ getPasswordStrengthText() }}
                        </text>
                    </view>
                </view>

                <!-- Á°ÆËÆ§Êñ∞ÂØÜÁ†ÅËæìÂÖ• -->
                <view class="input-group">
                    <view class="input-label">
                        <text class="label-text">Á°ÆËÆ§Êñ∞ÂØÜÁ†Å</text>
                    </view>
                    <view class="input-wrapper">
                        <input 
                            class="input-field"
                            :type="showConfirmPassword ? 'text' : 'password'"
                            v-model="confirmPassword"
                            placeholder="ËØ∑ÂÜçÊ¨°ËæìÂÖ•Êñ∞ÂØÜÁ†Å"
                            placeholder-class="placeholder-style"
                            @input="validateConfirmPasswordInput"
                            @blur="validateConfirmPasswordBlur"
                        />
                        <view class="eye-icon" @tap="toggleConfirmPassword">
                            <text class="iconfont">{{ showConfirmPassword ? 'üëÅÔ∏è' : 'üëÅÔ∏è‚Äçüó®Ô∏è' }}</text>
                        </view>
                    </view>
                    <!-- Á°ÆËÆ§ÂØÜÁ†ÅÈîôËØØÊèêÁ§∫ -->
                    <view class="error-tip" :class="{ 'show': confirmPasswordError }">
                        <text class="error-text">{{ confirmPasswordError }}</text>
                    </view>
                </view>

                <!-- Á°ÆËÆ§‰øÆÊîπÊåâÈíÆ -->
                <view class="button-group">
                    <button 
                        class="change-password-btn"
                        :class="{ 'btn-disabled': !canSubmit }"
                        :disabled="!canSubmit"
                        @tap="handleChangePassword"
                    >
                        Á°ÆËÆ§‰øÆÊîπ
                    </button>
                </view>

                <!-- Â∫ïÈÉ®ÈìæÊé• -->
                <view class="footer-links">
                    <text class="link-text">ËÆ∞Ëµ∑ÂØÜÁ†Å‰∫ÜÔºü</text>
                    <text class="link-btn" @tap="goToLogin">Á´ãÂç≥ÁôªÂΩï</text>
                </view>
            </view>
        </view>
    </view>
</template>

<script setup>
import { ref, computed, onUnmounted } from 'vue'
import { userApi } from '@/api/userApi'
// ÂìçÂ∫îÂºèÊï∞ÊçÆ
const mobile = ref('')
const verificationCode = ref('')
const newPassword = ref('')
const confirmPassword = ref('')
const showNewPassword = ref(false)
const showConfirmPassword = ref(false)
const countdown = ref(0)
const timer = ref(null)

// ÈîôËØØÊèêÁ§∫Áä∂ÊÄÅ
const mobileError = ref('')
const verificationCodeError = ref('')
const newPasswordError = ref('')
const confirmPasswordError = ref('')

// ÂàáÊç¢ÂØÜÁ†ÅÊòæÁ§∫Áä∂ÊÄÅ
const toggleNewPassword = () => {
    showNewPassword.value = !showNewPassword.value
}

const toggleConfirmPassword = () => {
    showConfirmPassword.value = !showConfirmPassword.value
}

// ÊâãÊú∫Âè∑È™åËØÅ - Âè™ÂÖÅËÆ∏Êï∞Â≠óÔºå‰∏îÁ¨¶ÂêàÊâãÊú∫Âè∑Ê†ºÂºè
const validateMobile = (e) => {
    let value = e.detail.value
    // Âè™‰øùÁïôÊï∞Â≠ó
    value = value.replace(/\D/g, '')
    // ÈôêÂà∂ÈïøÂ∫¶‰∏∫11‰Ωç
    if (value.length > 11) {
        value = value.slice(0, 11)
    }
    mobile.value = value
    // ËæìÂÖ•Êó∂Ê∏ÖÈô§ÈîôËØØÊèêÁ§∫
    if (mobileError.value) {
        mobileError.value = ''
    }
}

// È™åËØÅÁ†ÅÈ™åËØÅ - Âè™ÂÖÅËÆ∏6‰ΩçÊï∞Â≠ó
const validateVerificationCode = (e) => {
    let value = e.detail.value
    // Âè™‰øùÁïôÊï∞Â≠ó
    value = value.replace(/\D/g, '')
    // ÈôêÂà∂ÈïøÂ∫¶‰∏∫6‰Ωç
    if (value.length > 6) {
        value = value.slice(0, 6)
    }
    verificationCode.value = value
    // ËæìÂÖ•Êó∂Ê∏ÖÈô§ÈîôËØØÊèêÁ§∫
    if (verificationCodeError.value) {
        verificationCodeError.value = ''
    }
}

// Êñ∞ÂØÜÁ†ÅÈ™åËØÅ - Âè™ÂÖÅËÆ∏Â≠óÊØçÊï∞Â≠óÂíå‰∏ãÂàíÁ∫ø
const validateNewPassword = (e) => {
    let value = e.detail.value
    // Âè™‰øùÁïôÂ≠óÊØç„ÄÅÊï∞Â≠óÂíå‰∏ãÂàíÁ∫ø
    value = value.replace(/[^a-zA-Z0-9_]/g, '')
    newPassword.value = value
    // ËæìÂÖ•Êó∂Ê∏ÖÈô§ÈîôËØØÊèêÁ§∫
    if (newPasswordError.value) {
        newPasswordError.value = ''
    }
    // ÂØÜÁ†ÅÂèòÂåñÊó∂ÈáçÊñ∞È™åËØÅÁ°ÆËÆ§ÂØÜÁ†Å
    if (confirmPassword.value && confirmPasswordError.value) {
        validateConfirmPasswordBlur()
    }
}

// Á°ÆËÆ§ÂØÜÁ†ÅËæìÂÖ•È™åËØÅ
const validateConfirmPasswordInput = (e) => {
    let value = e.detail.value
    // Âè™‰øùÁïôÂ≠óÊØç„ÄÅÊï∞Â≠óÂíå‰∏ãÂàíÁ∫ø
    value = value.replace(/[^a-zA-Z0-9_]/g, '')
    confirmPassword.value = value
    // ËæìÂÖ•Êó∂Ê∏ÖÈô§ÈîôËØØÊèêÁ§∫
    if (confirmPasswordError.value) {
        confirmPasswordError.value = ''
    }
}

// Â§±ÁÑ¶È™åËØÅÂáΩÊï∞
const validateMobileBlur = () => {
    if (!mobile.value) {
        mobileError.value = ''
        return
    }
    if (!/^1[3-9]\d{9}$/.test(mobile.value)) {
        mobileError.value = 'ÊâãÊú∫Âè∑Ê†ºÂºè‰∏∫1ÂºÄÂ§¥ÁöÑ11‰ΩçÊï∞Â≠ó'
    } else {
        mobileError.value = ''
    }
}

const validateVerificationCodeBlur = () => {
    if (!verificationCode.value) {
        verificationCodeError.value = ''
        return
    }
    if (!/^\d{6}$/.test(verificationCode.value)) {
        verificationCodeError.value = 'È™åËØÅÁ†ÅÊ†ºÂºè‰∏∫6‰ΩçÊï∞Â≠ó'
    } else {
        verificationCodeError.value = ''
    }
}

const validateNewPasswordBlur = () => {
    if (!newPassword.value) {
        newPasswordError.value = ''
        return
    }
    if (newPassword.value.length < 8) {
        newPasswordError.value = 'ÂØÜÁ†ÅÊ†ºÂºè‰∏∫Ëá≥Â∞ë8‰ΩçÂ≠óÁ¨¶'
    } else if (!/^[a-zA-Z0-9_]+$/.test(newPassword.value)) {
        newPasswordError.value = 'ÂØÜÁ†ÅÊ†ºÂºèÂè™ËÉΩÂåÖÂê´Â≠óÊØçÊï∞Â≠óÂíå‰∏ãÂàíÁ∫ø'
    } else {
        newPasswordError.value = ''
    }
}

const validateConfirmPasswordBlur = () => {
    if (!confirmPassword.value) {
        confirmPasswordError.value = ''
        return
    }
    if (confirmPassword.value !== newPassword.value) {
        confirmPasswordError.value = 'Á°ÆËÆ§ÂØÜÁ†ÅÊ†ºÂºèÈúÄ‰∏éÊñ∞ÂØÜÁ†Å‰∏ÄËá¥'
    } else {
        confirmPasswordError.value = ''
    }
}

// ÊòØÂê¶ÂèØ‰ª•ÂèëÈÄÅÈ™åËØÅÁ†Å
const canSendCode = computed(() => {
    return /^1[3-9]\d{9}$/.test(mobile.value) && countdown.value === 0
})

// ÂèëÈÄÅÈ™åËØÅÁ†ÅÊåâÈíÆÊñáÂ≠ó
const sendCodeText = computed(() => {
    return countdown.value > 0 ? `${countdown.value}Áßí` : 'ÂèëÈÄÅÈ™åËØÅÁ†Å'
})

// Ê£ÄÊü•Ë°®ÂçïÊòØÂê¶ÂèØ‰ª•Êèê‰∫§
const canSubmit = computed(() => {
    return /^1[3-9]\d{9}$/.test(mobile.value) && 
           /^\d{6}$/.test(verificationCode.value) &&
           newPassword.value.length >= 8 && 
           /^[a-zA-Z0-9_]+$/.test(newPassword.value) &&
           confirmPassword.value === newPassword.value
})

// ÂØÜÁ†ÅÂº∫Â∫¶Ê£ÄÊµã
const getPasswordStrength = () => {
    const pwd = newPassword.value
    // ÂØÜÁ†ÅÂè™ËÉΩÂåÖÂê´Â≠óÊØçÊï∞Â≠ó‰∏ãÂàíÁ∫ø
    if (!/^[a-zA-Z0-9_]*$/.test(pwd)) return 0
    // ÈïøÂ∫¶Ëá≥Â∞ë8‰Ωç
    if (pwd.length < 8) return 0
    // 8-10‰ΩçÔºå‰ªÖÊï∞Â≠óÊàñ‰ªÖÂ≠óÊØç‰∏∫Âº±ÂØÜÁ†Å
    if (pwd.length <= 10 && (/^[a-zA-Z]+$/.test(pwd) || /^\d+$/.test(pwd))) return 1
    // ÂåÖÂê´Â≠óÊØç„ÄÅÊï∞Â≠óÂíå‰∏ãÂàíÁ∫ø‰∏∫Âº∫ÂØÜÁ†Å
    if (/[a-zA-Z]/.test(pwd) && /\d/.test(pwd) && /_/.test(pwd)) return 3
    // ÂåÖÂê´Â≠óÊØçÂíåÊï∞Â≠ó‰∏∫‰∏≠Á≠âÂØÜÁ†Å
    if (/[a-zA-Z]/.test(pwd) && /\d/.test(pwd)) return 2
    return 1
}

const getPasswordStrengthText = () => {
    const strength = getPasswordStrength()
    const pwd = newPassword.value
    if (!/^[a-zA-Z0-9_]*$/.test(pwd)) {
        return 'ÂØÜÁ†ÅÂè™ËÉΩÂåÖÂê´Â≠óÊØçÊï∞Â≠óÂíå‰∏ãÂàíÁ∫ø'
    }
    if (pwd.length < 8) {
        return 'ÂØÜÁ†ÅËá≥Â∞ë8‰Ωç'
    }
    const texts = ['ÂØÜÁ†ÅÊ†ºÂºèÈîôËØØ', 'ÂØÜÁ†ÅÂº∫Â∫¶ÔºöÂº±', 'ÂØÜÁ†ÅÂº∫Â∫¶Ôºö‰∏≠', 'ÂØÜÁ†ÅÂº∫Â∫¶ÔºöÂº∫']
    return texts[strength]
}

const getPasswordStrengthClass = () => {
    const strength = getPasswordStrength()
    const classes = ['strength-weak', 'strength-weak', 'strength-medium', 'strength-strong']
    return classes[strength]
}

// ÂèëÈÄÅÈ™åËØÅÁ†Å
const sendVerificationCode = async () => {
    if (!canSendCode.value) return
    
    // È™åËØÅÊâãÊú∫Âè∑Ê†ºÂºè - ‰∏•Ê†ºÁöÑ11‰ΩçÊï∞Â≠óÔºå1ÂºÄÂ§¥
    if (!/^1[3-9]\d{9}$/.test(mobile.value)) {
        uni.showToast({
            title: 'ËØ∑ËæìÂÖ•Ê≠£Á°ÆÁöÑÊâãÊú∫Âè∑Ê†ºÂºè',
            icon: 'none'
        })
        return
    }
    
    // TODO: ËøôÈáåÊ∑ªÂä†ÂèëÈÄÅÈ™åËØÅÁ†ÅÁöÑAPIË∞ÉÁî®
    console.log('ÂèëÈÄÅÈ™åËØÅÁ†ÅÂà∞Ôºö', mobile.value)
    const res = await userApi.updPasswordCode(mobile.value)
    uni.showToast({
        title: 'È™åËØÅÁ†ÅÂ∑≤ÂèëÈÄÅ',
        icon: 'success'
    })
    
    // ÂºÄÂßãÂÄíËÆ°Êó∂
    countdown.value = 60
    timer.value = setInterval(() => {
        countdown.value--
        if (countdown.value <= 0) {
            clearInterval(timer.value)
            timer.value = null
        }
    }, 1000)
}

// ‰øÆÊîπÂØÜÁ†ÅÂ§ÑÁêÜ
const handleChangePassword = async () => {
    if (!canSubmit.value) return
    
    // È™åËØÅÊâãÊú∫Âè∑Ê†ºÂºè - ‰∏•Ê†ºÁöÑ11‰ΩçÊï∞Â≠óÔºå1ÂºÄÂ§¥
    if (!/^1[3-9]\d{9}$/.test(mobile.value)) {
        uni.showToast({
            title: 'ËØ∑ËæìÂÖ•Ê≠£Á°ÆÁöÑÊâãÊú∫Âè∑Ê†ºÂºè',
            icon: 'none'
        })
        return
    }
    
    // È™åËØÅÈ™åËØÅÁ†Å - ÂøÖÈ°ªÊòØ6‰ΩçÊï∞Â≠ó
    if (!/^\d{6}$/.test(verificationCode.value)) {
        uni.showToast({
            title: 'È™åËØÅÁ†ÅÂøÖÈ°ªÊòØ6‰ΩçÊï∞Â≠ó',
            icon: 'none'
        })
        return
    }
    
    // È™åËØÅÊñ∞ÂØÜÁ†ÅÊ†ºÂºè
    if (newPassword.value.length < 8) {
        uni.showToast({
            title: 'ÂØÜÁ†ÅËá≥Â∞ëÈúÄË¶Å8‰Ωç',
            icon: 'none'
        })
        return
    }
    
    // È™åËØÅÂØÜÁ†ÅÂè™ËÉΩÂåÖÂê´Â≠óÊØçÊï∞Â≠ó‰∏ãÂàíÁ∫ø
    if (!/^[a-zA-Z0-9_]+$/.test(newPassword.value)) {
        uni.showToast({
            title: 'ÂØÜÁ†ÅÂè™ËÉΩÂåÖÂê´Â≠óÊØçÊï∞Â≠óÂíå‰∏ãÂàíÁ∫ø',
            icon: 'none'
        })
        return
    }
    
    // È™åËØÅÂØÜÁ†ÅÁ°ÆËÆ§
    if (newPassword.value !== confirmPassword.value) {
        uni.showToast({
            title: '‰∏§Ê¨°ÂØÜÁ†ÅËæìÂÖ•‰∏ç‰∏ÄËá¥',
            icon: 'none'
        })
        return
    }
    
    // TODO: ËøôÈáåÊ∑ªÂä†‰øÆÊîπÂØÜÁ†ÅÈÄªËæë
    const res = await userApi.updatePassword({
        phone: mobile.value,
        password: newPassword.value,
        code: verificationCode.value
    })
    console.log('‰øÆÊîπÂØÜÁ†ÅÁªìÊûú:', res)
    if (res.code === 200 || res.code === '200') {
        uni.showToast({
            title: 'ÂØÜÁ†Å‰øÆÊîπÊàêÂäü',
            icon: 'success'
        })
        uni.navigateTo({
            url: '/pages/index/index'
        })
    } else {
        uni.showToast({
            title: res.msg,
            icon: 'none'
        })
    }
    // Âª∂ËøüË∑≥ËΩ¨Âà∞ÁôªÂΩïÈ°µ
    setTimeout(() => {
        goToLogin()
    }, 1500)
}

// Ë∑≥ËΩ¨Âà∞ÁôªÂΩïÈ°µ
const goToLogin = () => {
    uni.navigateTo({
        url: '/pages/index/index'
    })
}

// È°µÈù¢ÈîÄÊØÅÊó∂Ê∏ÖÈô§ÂÆöÊó∂Âô®
onUnmounted(() => {
    if (timer.value) {
        clearInterval(timer.value)
    }
})
</script>

<style lang="scss" scoped>
.change-password-container {
    height: 1334rpx;
    width: 750rpx;
    background: #fff;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 0;
    box-sizing: border-box;
    overflow: hidden;
    position: fixed;
    top: 0;
    left: 0;
}

.change-password-card {
    width: 100%;
    height: 100%;
    background: #fff;
    border-radius: 0;
    padding: 80rpx 60rpx;
    box-shadow: none;
    backdrop-filter: none;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
}

.header {
    text-align: center;
    margin-bottom: 60rpx;
    width: 100%;
    
    .logo {
        margin-bottom: 20rpx;
        
        .logo-text {
            font-size: 48rpx;
            font-weight: bold;
            color: #667eea;
        }
    }
    
    .subtitle {
        color: #666;
        font-size: 28rpx;
    }
}

.form-container {
    width: 100%;
    max-width: 600rpx;
    
    .input-group {
        margin-bottom: 80rpx;
        position: relative;
        
        .input-label {
            margin-bottom: 16rpx;
            
            .label-text {
                color: #333;
                font-size: 28rpx;
                font-weight: 500;
            }
        }
        
        .input-wrapper {
            position: relative;
            
            .input-field {
                width: 100%;
                height: 88rpx;
                padding: 0 40rpx;
                border: 2rpx solid #e1e1e1;
                border-radius: 16rpx;
                font-size: 28rpx;
                color: #333;
                background: #fff;
                transition: all 0.3s ease;
                box-sizing: border-box;
                
                &:focus {
                    border-color: #667eea;
                    box-shadow: 0 0 0 4rpx rgba(102, 126, 234, 0.1);
                }
            }
            
            .eye-icon {
                position: absolute;
                right: 24rpx;
                top: 50%;
                transform: translateY(-50%);
                padding: 8rpx;
                font-size: 32rpx;
                color: #999;
                cursor: pointer;
                
                &:hover {
                    color: #667eea;
                }
            }
            
            &.verification-wrapper {
                display: flex;
                align-items: center;
                gap: 20rpx;
                
                .verification-input {
                    flex: 1;
                }
                
                .send-code-btn {
                    width: 200rpx;
                    height: 88rpx;
                    background: linear-gradient(135deg, #667eea, #764ba2);
                    border: none;
                    border-radius: 16rpx;
                    color: #fff;
                    font-size: 26rpx;
                    font-weight: 500;
                    transition: all 0.3s ease;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    text-align: center;
                    
                    &:not(.btn-disabled):active {
                        transform: translateY(2rpx);
                        box-shadow: 0 8rpx 20rpx rgba(102, 126, 234, 0.3);
                    }
                    
                    &.btn-disabled {
                        background: #ccc;
                        color: #999;
                    }
                }
            }
        }
        
        .placeholder-style {
            color: #bbb;
            font-size: 26rpx;
        }
    }
    
    .error-tip {
        position: absolute;
        top: calc(100% + 8rpx);
        left: 0;
        right: 0;
        z-index: 999;
        opacity: 0;
        pointer-events: none;
        transition: all 0.3s ease;
        transform: translateY(-10rpx);
        
        &.show {
            opacity: 1;
            transform: translateY(0);
        }
        
        .error-text {
            color: #ff4757;
            font-size: 24rpx;
            line-height: 1.4;
        }
    }
    
    .password-strength {
        position: absolute;
        top: calc(100% + 40rpx);
        left: 0;
        right: 0;
        z-index: 998;
        opacity: 0;
        pointer-events: none;
        transition: all 0.3s ease;
        transform: translateY(-10rpx);
        
        &.show {
            opacity: 1;
            transform: translateY(0);
        }
        
        .strength-text {
            font-size: 24rpx;
            
            &.strength-weak {
                color: #ff4757;
            }
            
            &.strength-medium {
                color: #ffa502;
            }
            
            &.strength-strong {
                color: #2ed573;
            }
        }
    }
    
    .button-group {
        margin: 60rpx 0 40rpx;
        
        .change-password-btn {
            width: 100%;
            height: 96rpx;
            background: linear-gradient(135deg, #667eea, #764ba2);
            border: none;
            border-radius: 16rpx;
            color: #fff;
            font-size: 32rpx;
            font-weight: 500;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            
            &:not(.btn-disabled):active {
                transform: translateY(2rpx);
                box-shadow: 0 8rpx 20rpx rgba(102, 126, 234, 0.3);
            }
            
            &.btn-disabled {
                background: #ccc;
                color: #999;
            }
        }
    }
    
    .footer-links {
        text-align: center;
        
        .link-text {
            color: #999;
            font-size: 26rpx;
        }
        
        .link-btn {
            color: #667eea;
            font-size: 26rpx;
            font-weight: 500;
            margin-left: 8rpx;
            
            &:active {
                opacity: 0.7;
            }
        }
    }
}

/* ÈÄÇÈÖçÂ∞èÂ±èËÆæÂ§á */
@media screen and (max-width: 750rpx) {
    .change-password-card {
        margin: 20rpx;
        padding: 40rpx 30rpx;
    }
    
    .header .logo .logo-text {
        font-size: 40rpx;
    }
}
</style>
